CPS についての覚書(すぐ忘れるから)

(:+ (1 3) (x) ((:+ (x 4) (rv) ((....)))))
              ^^              ^^
に括弧が多い気がするがこれでよい。
CPS は 
(PRIMSYM (OP*) (ID*) (CPS*))
となっている。OP が比較でないとき(+ などのとき)
は 
(PRIMSYM (OP*) (ID*) (CPS))
                     ^^^^^
となりCPS はひとつ。CPS の外側に() が余計にある。
比較の時は
(PRIMSYM (OP*) (ID*) (CPS0 CPS1))
                     ^^^^^^^^^^^
となり CPS は２つ。比較の時とそうでない時で
統一するために括弧が一つ多い。

cps の特性として同じ名前のシンボルに二回代入されてはいけない。
ところどころ、いみなく二回代入されるかもしれないと思って
書いているところがあるので複雑になっている。
とくに自由変数を見つけるところ。

つまり scheme でユーザが宣言したところは
cps で引き継がれるが、 cps 変換の際に自動的に
追加されるシンボルに関しては　SSA 的な一回代入がまもられている。
